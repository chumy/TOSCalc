{"ast":null,"code":"import _asyncToGenerator from \"/home/chumy/Programas/TOSCalc/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component, ViewChild } from \"@angular/core\";\nimport { JugadoresPage } from \"../jugadores/jugadores.page\";\nimport { Plugins } from '@capacitor/core';\nconst {\n  App\n} = Plugins;\nlet HomePage = class HomePage {\n  constructor(_alineacionService, _jugadorService, _entreandorService, _empleadoService, _patrocinadorService, navCtrl, platform, _location, translateService) {\n    this._alineacionService = _alineacionService;\n    this._jugadorService = _jugadorService;\n    this._entreandorService = _entreandorService;\n    this._empleadoService = _empleadoService;\n    this._patrocinadorService = _patrocinadorService;\n    this.navCtrl = navCtrl;\n    this.platform = platform;\n    this._location = _location;\n    this.translateService = translateService;\n    this.isData = false;\n    this.language = this.translateService.currentLang;\n    this.showSelect = false;\n    this.alineacion = _alineacionService.alineacion;\n    this.jugadoresPage = JugadoresPage;\n    this.entrenadores = _entreandorService.entrenadores;\n    this.empleados = _empleadoService.empleados;\n    this.patrocinadores = this._patrocinadorService.patrocinadores;\n    ///this.jugadores = _jugadorService.getJugadores(this.alineacion.mod);\n    /*_jugadorService.getJugadores(this.alineacion.mod).subscribe(data => {\n      this.jugadores = data;\n      console.log(\"recibiendo \" +data)\n    });*/\n    _jugadorService.setNewFile(this.alineacion.mod);\n    this.subscribe = this.platform.backButton.subscribeWithPriority(666666, () => {\n      //if (this.constructor.name == \"HomePage\") {\n      if (this._location.isCurrentPathEqualTo(\"/home\")) {\n        //navigator[\"app\"].exitApp();\n        App.exitApp();\n      } else {\n        this._location.back();\n      }\n    });\n  }\n  ionViewWillEnter() {\n    this.alineacion = this._alineacionService.alineacion;\n    this.jugadores = this._jugadorService.jugadores;\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.alineacion = _this._alineacionService.alineacion;\n      _this.jugadores = _this._jugadorService.jugadores;\n      _this.showNombre = false;\n      /*this.globalization.getPreferredLanguage()\n      .then(res => console.log(res))\n      .catch(e => console.log(e));*/\n      //console.log(this.alineacion);\n      _this._empleadoService.getEmpleados().subscribe(data => {\n        _this.isData = true;\n        _this.setEmpleadosIniciales();\n        return data;\n      });\n    })();\n  }\n  languageChange() {\n    this.translateService.use(this.language); // add this\n    this.showSelect = false;\n  } // add this\n  openSelect() {\n    this.showSelect = true;\n    this.selectRef.open();\n  }\n  getImgJugador(posicion) {\n    //console.log(\"assets/images/jugadores/\" + this.alineacion.mod + \"/\" + this.alineacion[posicion].id + \".jpg\");\n    return this.alineacion[posicion].id ? \"assets/images/jugadores/\" + this.alineacion.mod + \"/\" + this.alineacion[posicion].id + \".jpg\" : \"assets/images/jugador_vacio.jpg\";\n  }\n  getImgEntrenador(posicion) {\n    return this.alineacion[posicion].id ? \"assets/images/entrenadores/\" + this.alineacion[posicion].id + \".jpg\" : \"assets/images/entrenadores/entrenador_vacio_gris.jpg\";\n  }\n  getImgBench(posicion) {\n    let tipo = !!this.alineacion[posicion].isEntrenador ? 'entrenadores' : 'jugadores/' + this.alineacion.mod;\n    return this.alineacion[posicion].id ? \"assets/images/\" + tipo + \"/\" + this.alineacion[posicion].id + \".jpg\" : \"assets/images/bench.jpg\";\n  }\n  setEmpleadosIniciales() {\n    let entrenador = this._entreandorService.getEntrenador(901);\n    this.alineacion['COACH1'] = entrenador;\n    let empleado = this._empleadoService.getEmpleado(800);\n    this.alineacion['AGENTE'] = empleado;\n    empleado = this._empleadoService.getEmpleado(700);\n    this.alineacion['OJEADOR'] = empleado;\n    empleado = this._empleadoService.getEmpleado(600);\n    this.alineacion['CM'] = empleado;\n    this._alineacionService.actualizarGanancias();\n  }\n  updateAficion() {\n    this._alineacionService.actualizarGanancias();\n  }\n  getImgPatrocinador(posicion) {\n    return this.alineacion[posicion].id ? \"assets/images/patrocinadores/\" + this.alineacion[posicion].id + \".jpg\" : \"assets/images/patrocinadores/\" + posicion + \"_vacio.jpg\";\n  }\n  getImgEmpleado(posicion) {\n    return this.alineacion[posicion].id ? \"assets/images/empleados/\" + this.alineacion[posicion].id + \".jpg\" : \"assets/images/empleados/\" + posicion + \"_vacio.jpg\";\n  }\n};\n__decorate([ViewChild('mySelect')], HomePage.prototype, \"selectRef\", void 0);\nHomePage = __decorate([Component({\n  selector: \"app-home\",\n  templateUrl: \"home.page.html\",\n  styleUrls: [\"home.page.scss\"]\n})], HomePage);\nexport { HomePage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}